## Запись и изменение Git-репозитория

LICENSE: [MIT](./license.md)

![git-logo](./assets/logo.svg)

### **Текст**

---

#### Запись изменений в репозиторий

![Рисунок 8. Жизненный цикл состояний файлов](https://git-scm.com/book/en/v2/images/lifecycle.png)
*Рисунок 8. Жизненный цикл состояний файлов*

#### Определение состояния файлов

Основной инструмент, используемый для определения, какие файлы в каком состоянии находятся — это команда `git status`. 
Если вы выполните эту команду сразу после клонирования, вы увидите что-то вроде этого:

`$ git status`

#### Отслеживание новых файлов

Для того чтобы начать отслеживать (добавить под версионный контроль) новый файл, используется команда `git add`. Чтобы начать отслеживание файла `README`, вы можете выполнить следующее:

`$ git add README`

Если вы снова выполните команду `status`, то увидите, что файл `README` теперь отслеживаемый и добавлен в индекс

#### Индексация изменённых файлов

Давайте модифицируем файл, уже находящийся под версионным контролем. Если вы измените отслеживаемый файл `CONTRIBUTING.md` и после этого снова выполните команду `git status`, то результат будет примерно следующим:

`$ git status`

`On branch master`

`Your branch is up-to-date with 'origin/master'.`

`Changes to be committed:`
  
  `(use "git reset HEAD <file>..." to unstage)`

`new file:   README`

`Changes not staged for commit:`

`(use "git add <file>..." to update what will be committed)`

`(use "git checkout -- <file>..." to discard changes in working directory)`

`modified:   CONTRIBUTING.md`

#### Сокращенный вывод статуса

Вывод команды `git status` довольно всеобъемлющий и многословный. Git также имеет флаг вывода сокращенного статуса, так что вы можете увидеть изменения в более компактном виде. Если вы выполните `git status -s` или `git status --short` вы получите гораздо более упрощенный вывод:

#### Игнорирование файлов

К шаблонам в файле `.gitignore` применяются следующие правила:

* Пустые строки, а также строки, начинающиеся с `#`, игнорируются.

* Стандартные шаблоны являются глобальными и применяются рекурсивно для всего дерева каталогов.

* Чтобы избежать рекурсии используйте символ слэш `(/)` в начале шаблона.

* Чтобы исключить каталог добавьте слэш `(/)` в конец шаблона.

* Можно инвертировать шаблон, использовав восклицательный знак `(!)` в качестве первого символа.

#### Просмотр индексированных и неиндексированных изменений

Если результат работы команды `git status` недостаточно информативен для вас — вам хочется знать, что конкретно поменялось, а не только какие файлы были изменены — вы можете использовать команду `git diff`. Позже мы рассмотрим команду `git diff` подробнее; вы, скорее всего, будете использовать эту команду для получения ответов на два вопроса: что вы изменили, но ещё не проиндексировали, и что вы проиндексировали и собираетесь включить в коммит. Если `git status` отвечает на эти вопросы в самом общем виде, перечисляя имена файлов, `git diff` показывает вам непосредственно добавленные и удалённые строки — патч как он есть.

#### Коммит изменений

`$ git commit`

Эта команда откроет выбранный вами текстовый редактор.

`git commit -m "My first commit"`

Эта команда запишет коментарий

#### Удаление файлов

Для того чтобы удалить файл из Git, вам необходимо удалить его из отслеживаемых файлов (точнее, удалить его из вашего индекса) а затем выполнить коммит. Это позволяет сделать команда `git rm`, которая также удаляет файл из вашего рабочего каталога, так что в следующий раз вы не увидите его как “неотслеживаемый”.

#### Перемещение файлов

В отличие от многих других систем версионного контроля, Git не отслеживает перемещение файлов явно. Когда вы переименовываете файл в Git, в нём не сохраняется никаких метаданных, говорящих о том, что файл был переименован. Однако, Git довольно умён в плане обнаружения перемещений постфактум — мы рассмотрим обнаружение перемещения файлов чуть позже.

Таким образом, наличие в Git команды mv выглядит несколько странным. Если вам хочется переименовать файл в Git, вы можете сделать что-то вроде:

`$ git mv file_from file_to`

***Читать полностью***[&#10149;](https://git-scm.com/book/ru/v2/%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D1%8B-Git-%D0%97%D0%B0%D0%BF%D0%B8%D1%81%D1%8C-%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%B8%D0%B9-%D0%B2-%D1%80%D0%B5%D0%BF%D0%BE%D0%B7%D0%B8%D1%82%D0%BE%D1%80%D0%B8%D0%B9)

Более детально можно ознакомиться в видео:

[#4 Уроки Git+GitHub - Учим команды git clone, git status, git add, git commit и другие](https://www.youtube.com/watch?v=Pl0xwUicJDc&list=PLuY6eeDuleIOMB2R_Kky05ZfiAx2_pbAH&index=4&ab_channel=ITDoctor)

Видео взято с канала [ITDoctor](https://www.youtube.com/channel/UC2Ev-rDSHBov0ZMChesLfrg) в ознакомительных целях.

---

[вернуться &#8634;](./basics.md)

Git logo by http://git-scm.com/downloads/logos,
license: [CC BY 3.0](https://creativecommons.org/licenses/by/3.0/)